<!DOCTYPE html>
<html lang="en">
<head>
  <?php include($PicoWiki->config['app_dir'].'/backend/templates/html_head.html'); ?>

  <script src="<?=$PicoWiki->config['codemirror']?>lib/codemirror.min.js"></script>
  <link  href="<?=$PicoWiki->config['codemirror']?>lib/codemirror.min.css" rel="stylesheet">

  <script src="<?=$PicoWiki->config['codemirror']?>addon/edit/continuelist.min.js"></script>
  <script src="<?=$PicoWiki->config['codemirror']?>mode/xml/xml.min.js"></script>
  <script src="<?=$PicoWiki->config['codemirror']?>mode/javascript/javascript.min.js"></script>
  <script src="<?=$PicoWiki->config['codemirror']?>mode/markdown/markdown.min.js"></script>

  <script src="<?=$PicoWiki->config['codemirror']?>mode/php/php.min.js"></script>

  <?=$PicoWiki->css($dir.'/css/style.css') ?>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/default.min.css">
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
  <!-- additional languages -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/languages/awk.min.js"></script>

  <?php include($PicoWiki->config['app_dir'].'/backend/templates/_header.html'); ?>

  <div id="main" class="main">
   <?= $PicoWiki->html ?>
  </div>
  <?php if ($PicoWiki->isWritable($PicoWiki->meta['file-path'])) { ?>
    <div id="source" class="editor">
      <form method="POST" id="edform">
	<input type="hidden" name="payload" id="payload">
	<input type="hidden" name="action" value="save">
	<textarea id="srcedit"><?= htmlspecialchars($PicoWiki->source) ?></textarea>
      </form>
      <?=$PicoWiki->jsCode($dir.'/js/source.js')?>
    </div>

  <?php } ?>
  <?php include($PicoWiki->config['app_dir'].'/backend/templates/_footer.html'); ?>
  <script>hljs.highlightAll();</script>
</body>
</html>
