<!DOCTYPE html>
<html lang="en">
<head>
  <?php include($PicoWiki->config['app_dir'].'/backend/templates/html_head.html'); ?>

  <script src="<?=$PicoWiki->config['codemirror']?>lib/codemirror.min.js"></script>
  <link  href="<?=$PicoWiki->config['codemirror']?>lib/codemirror.min.css" rel="stylesheet">
  <script src="<?=$PicoWiki->config['codemirror']?>mode/xml/xml.min.js"></script>
  <script src="<?=$PicoWiki->config['codemirror']?>mode/javascript/javascript.min.js"></script>
  <script src="<?=$PicoWiki->config['codemirror']?>mode/css/css.min.js"></script>
  <script src="<?=$PicoWiki->config['codemirror']?>mode/htmlmixed/htmlmixed.min.js"></script>

  <?=$PicoWiki->css($dir.'/css/style.css') ?>
</head>
<body>

  <?php include($PicoWiki->config['app_dir'].'/backend/templates/_header.html'); ?>

  <div id="main" class="main">
    <p>File not found: <?= htmlspecialchars($file_path) ?></p>
    <p>Go <a href="<?= $PicoWiki->mkUrl()?>">Home</a></p>

    <?php if ($PicoWiki->isWritable($file_path)) { ?>
      <p>Use the <kbd>"&#x1F6C8; Source"</kbd> tool to create this file.</p>
    <?php } ?>

  </div>
  <?php if ($PicoWiki->isWritable($file_path)) { ?>
    <div id="source" class="editor">
      <form method="POST" id="edform">
	<input type="hidden" name="payload" id="payload">
	<input type="hidden" name="action" value="save">
	<textarea id="srcedit"><?= htmlspecialchars($new_template) ?></textarea>
      </form>
      <?=$PicoWiki->jsCode($dir.'/js/source.js')?>
    </div>

  <?php } ?>
  <?php include($PicoWiki->config['app_dir'].'/backend/templates/_footer.html'); ?>
</body>
</html>
